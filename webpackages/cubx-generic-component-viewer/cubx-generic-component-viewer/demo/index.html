<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>&lt;cubx-generic-component-viewer&gt; demo</title>

    <script src="../../../cubx.core.rte@2.3.1/webcomponents-lite/webcomponents-lite.js"></script>

    <!--
        Refer to the crc-loader artifact from a Cubbles-Base.
        Take care: All other dependencies are expected to be available within the same Base!

        Want to add a 'main' -script to be executed after the dependencies have been loaded?
        If yes, add the following attribute: data-crc-main="js/my-script.js"
    -->
    <script src="../../../cubx.core.rte@2.3.1/crc-loader/js/main.js" data-crcinit-loadcif="true"></script>

</head>
<body>
<!--  Place cubbles components there. -->
<cubx-generic-component-viewer cubx-webpackage-id="this"></cubx-generic-component-viewer>

<script>
    (function () {
        'use strict';
        var genericViewer = document.querySelector('cubx-generic-component-viewer');
        var definitions = {
            components: {
                'cubx-generic-mapper': {
                    'artifactId': 'cubx-generic-mapper',
                    'slots': [
                        {'slotId': 'mappedString', 'direction': ['output']},
                        {'slotId': 'inputString', 'direction': ['input']}
                    ],
                    'webpackageId': 'generic-mapper@1.0.0'
                },
                'cubx-marked-element': {
                    'artifactId': 'cubx-marked-element',
                    'slots': [
                        {'slotId': 'markdown', 'direction': ['input']}
                    ],
                    'webpackageId': 'com.incowia.cubx-marked-element@1.1.1'
                },
                'cubx-ckeditor': {
                    'artifactId': 'cubx-ckeditor',
                    'slots': [
                        {'slotId': 'dataAfterChange', 'direction': ['output']}
                    ],
                    'webpackageId': 'ckeditor@1.0.0'
                }
            },
            members: [
                {'memberId': 'genericMapper', 'artifactId': 'cubx-generic-mapper'},
                {'memberId': 'mdViewer', 'artifactId': 'cubx-marked-element'},
                {'memberId': 'ckeditor', 'artifactId': 'cubx-ckeditor'}
            ],
            connections: [
                {
                    'connectionId': 'htmlToMd',
                    'copyValue': true,
                    'destination': {'memberIdRef': 'mdViewer', 'slot': 'markdown'},
                    'source': {'memberIdRef': 'genericMapper', 'slot': 'mappedString'},
                    'hookFunction': ''
                },
                {
                    'connectionId': 'content',
                    'copyValue': true,
                    'destination': {'memberIdRef': 'genericMapper', 'slot': 'inputString'},
                    'source': {'memberIdRef': 'ckeditor', 'slot': 'dataAfterChange'},
                    'hookFunction': ''
                }
            ],
            componentArtifactId: ''
        };
        document.addEventListener('cifReady', function () {
            genericViewer.setDefinitions(definitions);
        });
    })()
</script>
</body>
</html>
